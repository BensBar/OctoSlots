<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>OctoSlots - GitHub Octocat Slot Machine</title>
  <style>
    /* ... original styles unchanged ... */
    /* (for brevity, your full styles remain as in your repo) */
  </style>
</head>
<body>
  <header class="app-header">
    <div class="user-info">Welcome, BensBar</div>
    <div class="game-title">OctoSlots</div>
    <div class="date-info">2025-06-02 13:19:30</div>
  </header>
  
  <!-- Audio elements embedded in the page -->
  <audio id="spin-sound" src="sounds/spin.wav" preload="auto"></audio>
  <audio id="stop-sound" src="sounds/stop.wav" preload="auto"></audio>
  <audio id="win-sound" src="sounds/win.wav" preload="auto"></audio>
  <audio id="win2-sound" src="sounds/win2.wav" preload="auto"></audio>
  <audio id="win3-sound" src="sounds/win3.wav" preload="auto"></audio>
  <audio id="lose-sound" src="sounds/lose.wav" preload="auto"></audio>
  
  <div class="slot-machine-container">
    <div class="slot-machine">
      <button class="paytable-button">?</button>
      <div class="paytable">
        <h3>Pay Table</h3>
        <div class="paytable-item">
          <img src="https://octodex.github.com/images/original.png" alt="Original">
          <span>x3: 1000 pts</span>
        </div>
        <div class="paytable-item">
          <img src="https://octodex.github.com/images/octobiwan.jpg" alt="Octobiwan">
          <span>x3: 500 pts</span>
        </div>
        <div class="paytable-item">
          <span>Any 3 matching: 250 pts</span>
        </div>
        <div class="paytable-item">
          <span>Any 2 matching: 50 pts</span>
        </div>
      </div>
      
      <div class="machine-top">
        <div class="flashing-lights">
          <div class="light"></div><div class="light"></div><div class="light"></div><div class="light"></div>
          <div class="light"></div><div class="light"></div><div class="light"></div><div class="light"></div>
        </div>
        <div class="jackpot-display">JACKPOT: 1000</div>
      </div>
      
      <div class="reels-container">
        <div id="reel1" class="reel">
          <div class="slot-item top" id="reel1-top"></div>
          <div class="slot-item middle" id="reel1-middle"></div>
          <div class="slot-item bottom" id="reel1-bottom"></div>
        </div>
        <div id="reel2" class="reel">
          <div class="slot-item top" id="reel2-top"></div>
          <div class="slot-item middle" id="reel2-middle"></div>
          <div class="slot-item bottom" id="reel2-bottom"></div>
        </div>
        <div id="reel3" class="reel">
          <div class="slot-item top" id="reel3-top"></div>
          <div class="slot-item middle" id="reel3-middle"></div>
          <div class="slot-item bottom" id="reel3-bottom"></div>
        </div>
        <div id="win-line" class="win-line"></div>
      </div>
      <div class="controls">
        <div class="score-display">
          <div class="score-card"><h3>CREDITS</h3><div class="score-value" id="credits">500</div></div>
          <div class="score-card"><h3>BET</h3><div class="score-value" id="bet-amount">10</div></div>
          <div class="score-card"><h3>WIN</h3><div class="score-value" id="win-amount">0</div></div>
        </div>
        <button class="spin-button" id="spin-button">SPIN</button>
      </div>
      <div class="win-message" id="win-message">
        <h2>WINNER!</h2>
        <p>You won <span id="win-value">250</span> credits!</p>
        <button id="continue-button">CONTINUE</button>
      </div>
      <div class="lever-container">
        <div class="lever-base">
          <div class="lever" id="lever"></div>
        </div>
      </div>
    </div>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Sound elements
      const spinSound = document.getElementById('spin-sound');
      const stopSound = document.getElementById('stop-sound');
      const winSound = document.getElementById('win-sound');
      const win2Sound = document.getElementById('win2-sound');
      const win3Sound = document.getElementById('win3-sound');
      const loseSound = document.getElementById('lose-sound');
      
      // Set all sounds to full volume
      [spinSound, stopSound, winSound, win2Sound, win3Sound, loseSound].forEach(s => { if (s) s.volume = 1.0; });

      // Play/stop sound helpers
      function playSpinSound() {
        if (spinSound) {
          spinSound.pause();
          spinSound.currentTime = 0;
          spinSound.loop = true;
          spinSound.volume = 1.0;
          spinSound.play().catch(e => console.log("Spin sound error:", e));
        }
      }
      function stopSpinSound() {
        if (spinSound) {
          spinSound.pause();
          spinSound.currentTime = 0;
          spinSound.loop = false;
        }
      }
      function playSound(soundEl) {
        if (soundEl) {
          soundEl.pause();
          soundEl.currentTime = 0;
          soundEl.play().catch(e => {});
        }
      }

      // Unlock audio on first user interaction
      function unlockAudio() {
        [spinSound, stopSound, winSound, win2Sound, win3Sound, loseSound].forEach(sound => {
          if (sound) {
            sound.volume = 0.01;
            sound.play().then(() => {
              sound.pause();
              sound.currentTime = 0;
              sound.volume = 1.0;
            }).catch(() => {});
          }
        });
        document.removeEventListener('click', unlockAudio);
        document.removeEventListener('touchstart', unlockAudio);
        document.removeEventListener('keydown', unlockAudio);
      }
      document.addEventListener('click', unlockAudio);
      document.addEventListener('touchstart', unlockAudio);
      document.addEventListener('keydown', unlockAudio);

      // Game state and DOM elements (same as your original code)
      // ... [Initialize game state, octocats, and elements objects here, unchanged] ...

      // Hide win message on spin click
      document.getElementById('spin-button').addEventListener('click', function() {
        document.getElementById('win-message').classList.remove('show');
        spinAllReels();
      });

      // --- SPIN LOGIC ---
      async function spinAllReels() {
        // ... [credit/bet checks etc. as in your original code] ...
        // For brevity, pseudo-code for unchanged logic:
        // if not enough credits: alert and return

        unlockAudio();

        // Play spin sound immediately
        playSpinSound();

        // ... [deduct credits, set state, start flashing lights, etc.] ...

        // Start reel spinning, then stop one by one
        // ... [code for starting intervals and animating reels] ...

        for (let i = 0; i < 3; i++) {
          await new Promise(resolve => {
            setTimeout(() => {
              // ... [clear interval, set symbols, play stop sound] ...
              playSound(stopSound);
              // Stop spin sound right after third reel
              if (i === 2) stopSpinSound();
              resolve();
            }, /* spin timing calculation */);
          });
        }

        // Check win
        await checkWin();
        // ... [reset state, enable spin button] ...
      }

      // --- WIN CHECK LOGIC ---
      async function checkWin() {
        // ... [determine win, as in your code] ...
        // Before playing win/lose sound, always stop spin sound
        stopSpinSound();
        if (didWin) {
          playSound(winSound /* or win2Sound or win3Sound, based on match */);
          // ... [show win message, update display, etc.] ...
        } else {
          playSound(loseSound);
        }
      }

      // ... [Rest of your game logic, UI handling, etc., unchanged] ...
    });
  </script>
</body>
</html>