<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=1280, height=1084, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>OctoSlots - Professional Slot Machine</title>
  <style>
    :root {
      --primary-bg: #1a0e0a;
      --secondary-bg: #2d1b16;
      --machine-body: #8B4513;
      --machine-face: #1C1C1C;
      --chrome: #C0C0C0;
      --gold: #FFD700;
      --red-led: #FF0000;
      --green-led: #00FF00;
      --blue-led: #0066FF;
      --border-color: #444;
      --text-color: #FFFFFF;
      --highlight-color: #FFD700;
      --gold-color: #FFD700;
      --win-color: #00FF00;
      --header-height: 80px;
      --machine-width: 900px;
      --machine-height: 950px;
    }
    body.light-mode {
      --primary-bg: #f0f8ff;
      --secondary-bg: #e6f3ff;
      --machine-body: #4682B4;
      --machine-face: #F5F5F5;
      --chrome: #708090;
      --gold: #FF6347;
      --red-led: #DC143C;
      --green-led: #32CD32;
      --blue-led: #1E90FF;
      --text-color: #191970;
      --highlight-color: #FF4500;
      --gold-color: #FF6347;
      --win-color: #228B22;
    }
    
    body.light-mode {
      background: radial-gradient(circle at center, #e6f3ff 0%, #f0f8ff 100%);
    }
    
    body.light-mode .slot-machine-container {
      background: radial-gradient(ellipse at center, rgba(70, 130, 180, 0.1) 0%, transparent 70%);
    }
    
    body.light-mode .slot-machine {
      background: linear-gradient(135deg, var(--machine-body) 0%, #5F9EA0 50%, var(--machine-body) 100%);
    }
    
    body.light-mode .machine-top {
      background: linear-gradient(135deg, var(--machine-face) 0%, #E0E0E0 100%);
    }
    
    body.light-mode .reels-container {
      background: linear-gradient(135deg, var(--machine-face) 0%, #DCDCDC 100%);
    }
    
    body.light-mode .controls {
      background: linear-gradient(135deg, var(--machine-face) 0%, #E0E0E0 100%);
    }
    
    body.light-mode .score-card {
      background: linear-gradient(135deg, #FFFFFF 0%, #F8F8FF 100%);
      color: var(--text-color);
    }
    
    body.light-mode .paytable {
      background: linear-gradient(135deg, var(--machine-face) 0%, #E0E0E0 100%);
    }
    
    body.light-mode .paytable-item span {
      color: var(--text-color);
    }
    body.light-mode .app-header,
    body.light-mode .slot-machine,
    body.light-mode .paytable,
    body.light-mode .paytable-button {
      box-shadow: 0 2px 8px rgba(0,0,0,0.15), 0 1.5px 3px rgba(70,130,180,0.1);
    }
    
    body.light-mode .app-header {
      background: linear-gradient(135deg, var(--machine-body) 0%, #5F9EA0 100%);
    }
    
    body.light-mode .user-info, 
    body.light-mode .date-info,
    body.light-mode .game-title {
      color: #FFFFFF;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }
    body.light-mode .win-message {
      background: linear-gradient(135deg, var(--gold) 0%, #FF7F50 100%) !important;
      color: #FFFFFF !important;
      box-shadow: 0 0 50px rgba(255, 99, 71, 0.8);
    }
    
    body.light-mode .win-message h2 {
      color: #FFFFFF !important;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    }
    
    body.light-mode .win-message p {
      color: #FFFFFF !important;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    }
    body.light-mode .paytable {
      background: linear-gradient(135deg, var(--machine-face) 0%, #E0E0E0 100%) !important;
      color: var(--text-color) !important;
      border: 4px solid var(--chrome) !important;
    }
    
    body.light-mode .paytable h3 {
      color: var(--highlight-color) !important;
    }
    
    body.light-mode .paytable-button {
      background: linear-gradient(135deg, var(--gold) 0%, #FF7F50 100%) !important;
      color: #FFFFFF !important;
      border: 4px solid var(--chrome) !important;
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Arial Black", "Helvetica Neue", Arial, sans-serif;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }
    
    body {
      background: radial-gradient(circle at center, #2d1b16 0%, #1a0e0a 100%);
      color: var(--text-color);
      overflow: hidden;
      height: 100vh;
      width: 100vw;
      display: flex;
      flex-direction: column;
      position: fixed;
      top: 0;
      left: 0;
      font-size: 18px;
    }
    .app-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 30px;
      height: var(--header-height);
      background: linear-gradient(135deg, var(--machine-body) 0%, #654321 100%);
      border-bottom: 4px solid var(--gold);
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 10;
      box-shadow: 0 4px 20px rgba(0,0,0,0.5);
    }
    
    .user-info, .date-info {
      font-size: 18px;
      color: var(--gold);
      white-space: nowrap;
      font-weight: bold;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
    }
    
    .game-title {
      font-size: 28px;
      font-weight: 900;
      color: var(--gold);
      margin: 0 20px;
      flex-shrink: 0;
      text-shadow: 3px 3px 6px rgba(0,0,0,0.8);
      letter-spacing: 2px;
    }
    #theme-toggle {
      background: linear-gradient(135deg, var(--gold) 0%, #DAA520 100%);
      border: 3px solid var(--chrome);
      cursor: pointer;
      font-size: 24px;
      padding: 12px 16px;
      display: flex;
      align-items: center;
      outline: none;
      transition: all 0.3s;
      margin: 0 20px;
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      min-width: 60px;
      min-height: 60px;
      justify-content: center;
    }
    
    #theme-toggle:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.4);
    }
    
    #theme-toggle:active {
      transform: translateY(0);
      box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
    
    #theme-icon {
      transition: transform 0.3s;
    }
    
    #theme-toggle:active #theme-icon {
      transform: rotate(-30deg) scale(1.2);
    }
    .slot-machine-container {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: calc(100vh - var(--header-height));
      width: 100vw;
      padding: 20px;
      margin-top: var(--header-height);
      background: radial-gradient(ellipse at center, rgba(139, 69, 19, 0.1) 0%, transparent 70%);
    }
    
    .slot-machine {
      position: relative;
      width: var(--machine-width);
      height: var(--machine-height);
      background: linear-gradient(135deg, var(--machine-body) 0%, #654321 50%, var(--machine-body) 100%);
      border-radius: 30px;
      border: 8px solid var(--chrome);
      box-shadow: 
        0 0 40px rgba(0, 0, 0, 0.8),
        inset 0 0 20px rgba(255, 215, 0, 0.1),
        inset 0 -10px 20px rgba(0, 0, 0, 0.3);
      padding: 30px;
      overflow: visible;
      max-width: none;
    }
    
    .machine-glow {
      position: absolute;
      top: -20px;
      left: -20px;
      right: -20px;
      bottom: -20px;
      background: radial-gradient(ellipse at center, rgba(255, 215, 0, 0.3) 0%, transparent 70%);
      border-radius: 50px;
      z-index: -1;
      animation: glow-pulse 3s ease-in-out infinite alternate;
    }
    
    @keyframes glow-pulse {
      0% { opacity: 0.5; }
      100% { opacity: 0.8; }
    }
    .machine-top {
      text-align: center;
      margin-bottom: 30px;
      padding: 20px;
      background: linear-gradient(135deg, var(--machine-face) 0%, #333 100%);
      border-radius: 20px;
      border: 4px solid var(--chrome);
      position: relative;
      box-shadow: 
        inset 0 0 20px rgba(0, 0, 0, 0.5),
        0 4px 8px rgba(0, 0, 0, 0.3);
    }
    
    .jackpot-display {
      font-size: 48px;
      font-weight: 900;
      color: var(--gold);
      text-shadow: 
        0 0 20px var(--gold),
        0 0 40px var(--gold),
        2px 2px 4px rgba(0, 0, 0, 0.8);
      letter-spacing: 4px;
      animation: jackpot-glow 2s ease-in-out infinite alternate;
    }
    
    @keyframes jackpot-glow {
      0% { text-shadow: 0 0 20px var(--gold), 0 0 40px var(--gold), 2px 2px 4px rgba(0, 0, 0, 0.8); }
      100% { text-shadow: 0 0 30px var(--gold), 0 0 60px var(--gold), 2px 2px 4px rgba(0, 0, 0, 0.8); }
    }
    .flashing-lights {
      position: absolute;
      top: -8px;
      left: 10px;
      right: 10px;
      height: 16px;
      display: flex;
      justify-content: space-around;
      z-index: 5;
    }
    
    .light {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background-color: #444;
      border: 2px solid var(--chrome);
      box-shadow: inset 0 0 4px rgba(0, 0, 0, 0.5);
      transition: all 0.2s;
    }
    
    .light.on {
      background-color: var(--red-led);
      box-shadow: 
        0 0 20px var(--red-led),
        0 0 40px var(--red-led),
        inset 0 0 8px rgba(255, 255, 255, 0.3);
    }
    
    .light:nth-child(2n).on {
      background-color: var(--blue-led);
      box-shadow: 
        0 0 20px var(--blue-led),
        0 0 40px var(--blue-led),
        inset 0 0 8px rgba(255, 255, 255, 0.3);
    }
    
    .light:nth-child(3n).on {
      background-color: var(--green-led);
      box-shadow: 
        0 0 20px var(--green-led),
        0 0 40px var(--green-led),
        inset 0 0 8px rgba(255, 255, 255, 0.3);
    }
    .reels-container {
      display: flex;
      justify-content: space-between;
      gap: 20px;
      margin-bottom: 30px;
      position: relative;
      background: linear-gradient(135deg, var(--machine-face) 0%, #1a1a1a 100%);
      padding: 20px;
      border-radius: 20px;
      border: 4px solid var(--chrome);
      box-shadow: 
        inset 0 0 30px rgba(0, 0, 0, 0.8),
        0 4px 8px rgba(0, 0, 0, 0.3);
    }
    
    .reel {
      position: relative;
      flex: 1;
      height: 300px;
      background: linear-gradient(135deg, #000 0%, #1a1a1a 50%, #000 100%);
      border-radius: 15px;
      border: 3px solid var(--chrome);
      overflow: hidden;
      box-shadow: 
        inset 0 0 30px rgba(0, 0, 0, 0.9),
        0 0 10px rgba(255, 215, 0, 0.3);
    }
    
    .reel::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(
        90deg,
        transparent 0%,
        rgba(255, 255, 255, 0.1) 50%,
        transparent 100%
      );
      pointer-events: none;
      z-index: 2;
    }
    .slot-item {
      position: absolute;
      width: 100%;
      height: 33.33%;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: top 0.8s cubic-bezier(.4,1.6,.6,.8);
      background: radial-gradient(ellipse at center, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
    }
    
    .slot-item.top { top: 0; }
    .slot-item.middle { top: 33.33%; }
    .slot-item.bottom { top: 66.66%; }
    
    .slot-item img {
      max-width: 85%;
      max-height: 85%;
      object-fit: contain;
      transition: transform 0.5s cubic-bezier(.4,1.6,.6,.8);
      filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.3));
    }
    
    .slot-item.middle img {
      max-width: 95%;
      max-height: 95%;
      filter: drop-shadow(0 0 15px rgba(255, 215, 0, 0.5));
    }
    
    .spinning .slot-item {
      animation: spin-blur 0.05s infinite linear;
    }
    
    @keyframes spin-blur {
      0%, 100% { 
        filter: blur(2px) brightness(0.8); 
        transform: scale(0.95);
      }
      50% { 
        filter: blur(4px) brightness(0.6); 
        transform: scale(0.9);
      }
    }
    .win-line {
      position: absolute;
      left: 0;
      right: 0;
      top: 50%;
      height: 8px;
      background: linear-gradient(90deg, transparent 0%, var(--red-led) 50%, transparent 100%);
      transform: translateY(-50%);
      z-index: 5;
      pointer-events: none;
      border: 2px solid rgba(255, 255, 255, 0.8);
      border-radius: 4px;
      box-shadow: 0 0 20px var(--red-led);
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    .win-line.highlight {
      background: linear-gradient(90deg, transparent 0%, var(--green-led) 50%, transparent 100%);
      box-shadow: 
        0 0 30px var(--green-led),
        0 0 60px var(--green-led);
      opacity: 1;
      animation: win-line-pulse 0.5s infinite alternate;
    }
    
    @keyframes win-line-pulse {
      0% { 
        opacity: 0.8;
        box-shadow: 0 0 30px var(--green-led), 0 0 60px var(--green-led);
      }
      100% { 
        opacity: 1;
        box-shadow: 0 0 50px var(--green-led), 0 0 100px var(--green-led);
      }
    }
    .controls {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      background: linear-gradient(135deg, var(--machine-face) 0%, #333 100%);
      border-radius: 20px;
      border: 4px solid var(--chrome);
      box-shadow: 
        inset 0 0 20px rgba(0, 0, 0, 0.5),
        0 4px 8px rgba(0, 0, 0, 0.3);
    }
    
    .score-display {
      display: flex;
      justify-content: space-between;
      width: 100%;
      margin-bottom: 30px;
      gap: 20px;
    }
    
    .score-card {
      background: linear-gradient(135deg, #000 0%, #1a1a1a 100%);
      padding: 20px 25px;
      border-radius: 15px;
      border: 3px solid var(--chrome);
      text-align: center;
      flex: 1;
      box-shadow: 
        inset 0 0 20px rgba(0, 0, 0, 0.8),
        0 4px 8px rgba(0, 0, 0, 0.3);
    }
    
    .score-card h3 {
      font-size: 16px;
      margin-bottom: 8px;
      color: var(--gold);
      font-weight: bold;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
      letter-spacing: 1px;
    }
    
    .score-value {
      font-size: 32px;
      font-weight: 900;
      color: var(--gold);
      text-shadow: 
        0 0 10px var(--gold),
        2px 2px 4px rgba(0, 0, 0, 0.8);
      font-family: "Courier New", monospace;
    }
    .spin-button {
      background: linear-gradient(135deg, var(--red-led) 0%, #CC0000 50%, var(--red-led) 100%);
      color: white;
      border: 6px solid var(--chrome);
      border-radius: 25px;
      padding: 25px 60px;
      font-size: 32px;
      font-weight: 900;
      cursor: pointer;
      box-shadow: 
        0 8px 20px rgba(0, 0, 0, 0.5),
        inset 0 0 20px rgba(255, 255, 255, 0.2);
      transition: all 0.2s ease;
      position: relative;
      overflow: hidden;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
      letter-spacing: 3px;
      min-width: 200px;
      min-height: 80px;
    }
    
    .spin-button:hover {
      transform: translateY(-4px);
      box-shadow: 
        0 12px 30px rgba(0, 0, 0, 0.6),
        inset 0 0 30px rgba(255, 255, 255, 0.3);
      background: linear-gradient(135deg, #FF3333 0%, #FF0000 50%, #CC0000 100%);
    }
    
    .spin-button:active {
      transform: translateY(2px);
      box-shadow: 
        0 4px 15px rgba(0, 0, 0, 0.4),
        inset 0 0 15px rgba(255, 255, 255, 0.1);
    }
    
    .spin-button:disabled {
      background: linear-gradient(135deg, #666 0%, #444 50%, #333 100%);
      color: #999;
      cursor: not-allowed;
      box-shadow: 
        0 4px 10px rgba(0, 0, 0, 0.3),
        inset 0 0 10px rgba(255, 255, 255, 0.05);
      transform: translateY(0);
    }
    .spin-button::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, 
        transparent 30%, 
        rgba(255,255,255,0.3) 50%, 
        transparent 70%);
      pointer-events: none;
      transform: translateX(-100%);
      transition: transform 0.6s;
    }
    
    .spin-button:hover::after {
      transform: translateX(100%);
    }
    .win-message {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: linear-gradient(135deg, var(--gold) 0%, #DAA520 100%);
      padding: 40px;
      border-radius: 20px;
      border: 6px solid var(--chrome);
      text-align: center;
      z-index: 20;
      box-shadow: 
        0 0 50px rgba(255, 215, 0, 0.8),
        0 0 100px rgba(255, 215, 0, 0.4),
        inset 0 0 20px rgba(255, 255, 255, 0.3);
      opacity: 0;
      visibility: hidden;
      transition: all 0.5s ease;
      animation: win-message-glow 2s ease-in-out infinite alternate;
    }
    
    .win-message.show {
      opacity: 1;
      visibility: visible;
    }
    
    @keyframes win-message-glow {
      0% { 
        box-shadow: 
          0 0 50px rgba(255, 215, 0, 0.8),
          0 0 100px rgba(255, 215, 0, 0.4),
          inset 0 0 20px rgba(255, 255, 255, 0.3);
      }
      100% { 
        box-shadow: 
          0 0 70px rgba(255, 215, 0, 1),
          0 0 140px rgba(255, 215, 0, 0.6),
          inset 0 0 30px rgba(255, 255, 255, 0.4);
      }
    }
    
    .win-message h2 {
      color: var(--machine-face);
      font-size: 48px;
      margin-bottom: 20px;
      font-weight: 900;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      letter-spacing: 3px;
    }
    
    .win-message p {
      color: var(--machine-face);
      font-size: 24px;
      margin-bottom: 25px;
      font-weight: bold;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
    }
    
    .win-message button {
      background: linear-gradient(135deg, var(--red-led) 0%, #CC0000 100%);
      color: white;
      border: 4px solid var(--chrome);
      border-radius: 15px;
      padding: 15px 30px;
      font-size: 20px;
      font-weight: bold;
      cursor: pointer;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      transition: all 0.2s;
    }
    
    .win-message button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
    }
    .paytable {
      position: absolute;
      top: 30px;
      right: 30px;
      background: linear-gradient(135deg, var(--machine-face) 0%, #333 100%);
      border: 4px solid var(--chrome);
      border-radius: 15px;
      padding: 20px;
      font-size: 16px;
      z-index: 30;
      transform: scale(0);
      transform-origin: top right;
      transition: transform 0.4s ease;
      box-shadow: 
        0 8px 20px rgba(0, 0, 0, 0.5),
        inset 0 0 20px rgba(255, 215, 0, 0.1);
      min-width: 280px;
    }
    
    .paytable-button {
      position: absolute;
      top: 20px;
      right: 20px;
      background: linear-gradient(135deg, var(--gold) 0%, #DAA520 100%);
      color: var(--machine-face);
      border: 4px solid var(--chrome);
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 24px;
      font-weight: bold;
      cursor: pointer;
      z-index: 31;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      transition: all 0.2s;
    }
    
    .paytable-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
    }
    
    .paytable.show {
      transform: scale(1);
    }
    
    .paytable h3 {
      color: var(--gold);
      margin-bottom: 15px;
      font-size: 20px;
      font-weight: bold;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
      text-align: center;
      letter-spacing: 1px;
    }
    
    .paytable-item {
      display: flex;
      align-items: center;
      margin-bottom: 12px;
      padding: 8px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 8px;
      border: 1px solid var(--chrome);
    }
    
    .paytable-item img {
      width: 40px;
      height: 40px;
      margin-right: 15px;
      filter: drop-shadow(0 0 5px rgba(255, 215, 0, 0.3));
    }
    
    .paytable-item span {
      color: var(--text-color);
      font-weight: bold;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
    }
    .lever-container {
      position: absolute;
      right: -60px;
      top: 50%;
      transform: translateY(-50%);
      height: 250px;
      display: flex;
      flex-direction: column;
      align-items: center;
      z-index: 5;
    }
    
    .lever-base {
      width: 60px;
      height: 100px;
      background: linear-gradient(135deg, var(--chrome) 0%, #999 100%);
      border-radius: 15px 15px 0 0;
      position: relative;
      border: 3px solid #666;
      box-shadow: 
        0 4px 8px rgba(0, 0, 0, 0.3),
        inset 0 0 10px rgba(255, 255, 255, 0.2);
    }
    
    .lever {
      width: 30px;
      height: 150px;
      background: linear-gradient(135deg, var(--red-led) 0%, #CC0000 50%, #AA0000 100%);
      border-radius: 15px;
      border: 3px solid var(--chrome);
      position: absolute;
      top: 0;
      left: 15px;
      transform-origin: top center;
      transform: rotate(0deg);
      transition: transform 0.4s ease;
      cursor: pointer;
      box-shadow: 
        0 4px 8px rgba(0, 0, 0, 0.3),
        inset 0 0 10px rgba(255, 255, 255, 0.2);
    }
    
    .lever::after {
      content: '';
      position: absolute;
      bottom: -20px;
      left: -5px;
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, var(--red-led) 0%, #CC0000 100%);
      border-radius: 50%;
      border: 3px solid var(--chrome);
      box-shadow: 
        0 4px 8px rgba(0, 0, 0, 0.3),
        inset 0 0 10px rgba(255, 255, 255, 0.2);
    }
    
    .lever.pulled {
      transform: rotate(45deg);
    }
    
    .lever:hover {
      background: linear-gradient(135deg, #FF3333 0%, var(--red-led) 50%, #CC0000 100%);
    }
    audio {
      display: none;
    }
    
    /* Touchscreen Optimizations */
    @media (max-width: 1300px) {
      .slot-machine {
        width: 90vw;
        height: 85vh;
        max-width: 1200px;
      }
      
      .lever-container {
        display: none;
      }
    }
    
    @media (max-height: 1100px) {
      .slot-machine {
        height: 80vh;
      }
      
      .reel {
        height: 250px;
      }
      
      .jackpot-display {
        font-size: 36px;
      }
    }
    
    @media (max-width: 900px) {
      .reels-container { 
        gap: 15px; 
        padding: 15px;
      }
      
      .reel { 
        height: 220px; 
      }
      
      .slot-machine { 
        padding: 20px; 
      }
      
      .spin-button { 
        padding: 20px 50px; 
        font-size: 28px; 
        min-width: 180px;
        min-height: 70px;
      }
      
      .score-card { 
        padding: 15px 20px; 
      }
      
      .score-value { 
        font-size: 28px; 
      }
      
      .lever-container { 
        display: none; 
      }
    }
    
    @media (max-height: 800px) {
      .machine-top { 
        margin-bottom: 20px; 
        padding: 15px; 
      }
      
      .jackpot-display { 
        font-size: 32px; 
      }
      
      .controls { 
        padding: 15px; 
      }
      
      .score-display { 
        margin-bottom: 20px; 
      }
      
      .reel {
        height: 180px;
      }
    }
    
    /* Add some decorative elements */
    .machine-corner {
      position: absolute;
      width: 20px;
      height: 20px;
      background: var(--gold);
      border: 2px solid var(--chrome);
    }
    
    .machine-corner.top-left {
      top: 10px;
      left: 10px;
      border-radius: 0 0 10px 0;
    }
    
    .machine-corner.top-right {
      top: 10px;
      right: 10px;
      border-radius: 0 0 0 10px;
    }
    
    .machine-corner.bottom-left {
      bottom: 10px;
      left: 10px;
      border-radius: 0 10px 0 0;
    }
    
    .machine-corner.bottom-right {
      bottom: 10px;
      right: 10px;
      border-radius: 10px 0 0 0;
    }
    
    /* Vibration simulation */
    .slot-machine.vibrate {
      animation: vibrate 0.1s linear infinite;
    }
    
    @keyframes vibrate {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-1px); }
      75% { transform: translateX(1px); }
    }
  </style>
</head>
<body>
  <header class="app-header">
    <div class="user-info">Welcome, BensBar</div>
    <div class="game-title">OctoSlots</div>
    <button id="theme-toggle" title="Toggle light/dark mode">
      <span id="theme-icon">🌙</span>
    </button>
    <div class="date-info">2025-06-01 15:13:45 UTC</div>
  </header>
  
  <!-- Audio elements embedded in the page -->
  <audio id="spin-sound" src="sounds/spin.wav" preload="auto"></audio>
  <audio id="stop-sound" src="sounds/stop.wav" preload="auto"></audio>
  <audio id="win-sound" src="sounds/win.wav" preload="auto"></audio>
  <audio id="win2-sound" src="sounds/win2.wav" preload="auto"></audio>
  <audio id="win3-sound" src="sounds/win3.wav" preload="auto"></audio>
  <audio id="lose-sound" src="sounds/lose.wav" preload="auto"></audio>
  
  <div class="slot-machine-container">
    <div class="machine-glow"></div>
    <div class="slot-machine">
      <div class="machine-corner top-left"></div>
      <div class="machine-corner top-right"></div>
      <div class="machine-corner bottom-left"></div>
      <div class="machine-corner bottom-right"></div>
      
      <button class="paytable-button">?</button>
      <div class="paytable">
        <h3>Pay Table</h3>
        <div class="paytable-item">
          <img src="https://bensbar.github.io/OctoSlots/images/original.png" alt="Original">
          <span>x3: 1000 pts</span>
        </div>
        <div class="paytable-item">
          <img src="https://bensbar.github.io/OctoSlots/images/octobiwan.png" alt="Octobiwan">
          <span>x3: 500 pts</span>
        </div>
        <div class="paytable-item">
          <span>Any 3 matching: 250 pts</span>
        </div>
        <div class="paytable-item">
          <span>Any 2 matching: 50 pts</span>
        </div>
      </div>
      
      <div class="machine-top">
        <div class="flashing-lights">
          <div class="light"></div>
          <div class="light"></div>
          <div class="light"></div>
          <div class="light"></div>
          <div class="light"></div>
          <div class="light"></div>
          <div class="light"></div>
          <div class="light"></div>
        </div>
        <div class="jackpot-display">JACKPOT: 1000</div>
      </div>
      
      <div class="reels-container">
        <div id="reel1" class="reel">
          <div class="slot-item top" id="reel1-top"></div>
          <div class="slot-item middle" id="reel1-middle"></div>
          <div class="slot-item bottom" id="reel1-bottom"></div>
        </div>
        <div id="reel2" class="reel">
          <div class="slot-item top" id="reel2-top"></div>
          <div class="slot-item middle" id="reel2-middle"></div>
          <div class="slot-item bottom" id="reel2-bottom"></div>
        </div>
        <div id="reel3" class="reel">
          <div class="slot-item top" id="reel3-top"></div>
          <div class="slot-item middle" id="reel3-middle"></div>
          <div class="slot-item bottom" id="reel3-bottom"></div>
        </div>
        <div id="win-line" class="win-line"></div>
      </div>
      
      <div class="controls">
        <div class="score-display">
          <div class="score-card">
            <h3>CREDITS</h3>
            <div class="score-value" id="credits">500</div>
          </div>
          <div class="score-card">
            <h3>BET</h3>
            <div class="score-value" id="bet-amount">10</div>
          </div>
          <div class="score-card">
            <h3>WIN</h3>
            <div class="score-value" id="win-amount">0</div>
          </div>
        </div>
        <button class="spin-button" id="spin-button">SPIN</button>
      </div>
      
      <div class="win-message" id="win-message">
        <h2>WINNER!</h2>
        <p>You won <span id="win-value">250</span> credits!</p>
        <button id="continue-button">CONTINUE</button>
      </div>
      
      <div class="lever-container">
        <div class="lever-base">
          <div class="lever" id="lever"></div>
        </div>
      </div>
    </div>
  </div>
  
  <script>
    // THEME TOGGLE LOGIC
    const themeToggleBtn = document.getElementById('theme-toggle');
    const themeIcon = document.getElementById('theme-icon');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    function setTheme(mode) {
      if (mode === 'light') {
        document.body.classList.add('light-mode');
        themeIcon.textContent = '🌞';
        localStorage.setItem('octoslots-theme', 'light');
      } else {
        document.body.classList.remove('light-mode');
        themeIcon.textContent = '🌙';
        localStorage.setItem('octoslots-theme', 'dark');
      }
    }
    function toggleTheme() {
      const isLight = document.body.classList.contains('light-mode');
      setTheme(isLight ? 'dark' : 'light');
    }
    themeToggleBtn.addEventListener('click', toggleTheme);
    (function() {
      const saved = localStorage.getItem('octoslots-theme');
      if (saved === 'light') {
        setTheme('light');
      } else if (saved === 'dark') {
        setTheme('dark');
      } else {
        setTheme(prefersDark ? 'dark' : 'light');
      }
    })();

    // --- Slot Machine Game logic ---
    document.addEventListener('DOMContentLoaded', function() {
      // Audio system
      const audioContext = {
        initialized: false,
        context: null,
        soundsLoaded: false,
        sounds: {
          spin: null,
          stop: null,
          win: null,
          win2: null,
          win3: null,
          lose: null
        },
        volumes: {
          spin: 1.0,
          stop: 1.0,
          win: 1.0,
          win2: 1.0,
          win3: 1.0,
          lose: 1.0
        }
      };
      const fallbackAudio = {
        spin: document.getElementById('spin-sound'),
        stop: document.getElementById('stop-sound'),
        win: document.getElementById('win-sound'),
        win2: document.getElementById('win2-sound'),
        win3: document.getElementById('win3-sound'),
        lose: document.getElementById('lose-sound')
      };
      Object.values(fallbackAudio).forEach(audio => {
        if (audio) audio.volume = 1.0;
      });
      function initAudio() {
        try {
          if (audioContext.initialized) return true;
          const AudioContext = window.AudioContext || window.webkitAudioContext;
          if (!AudioContext) return false;
          audioContext.context = new AudioContext();
          const sounds = [
            { name: 'spin', url: 'sounds/spin.wav' },
            { name: 'stop', url: 'sounds/stop.wav' },
            { name: 'win', url: 'sounds/win.wav' },
            { name: 'win2', url: 'sounds/win2.wav' },
            { name: 'win3', url: 'sounds/win3.wav' },
            { name: 'lose', url: 'sounds/lose.wav' }
          ];
          sounds.forEach(sound => loadSound(sound.name, sound.url));
          audioContext.initialized = true;
          return true;
        } catch (e) {
          return false;
        }
      }
      function loadSound(name, url) {
        try {
          fetch(url)
            .then(response => response.arrayBuffer())
            .then(arrayBuffer => audioContext.context.decodeAudioData(arrayBuffer))
            .then(audioBuffer => {
              audioContext.sounds[name] = audioBuffer;
              const allSoundsLoaded = Object.values(audioContext.sounds).every(sound => sound !== null);
              if (allSoundsLoaded) {
                audioContext.soundsLoaded = true;
              }
            })
            .catch(e => {});
        } catch (e) {}
      }
      function playSound(name) {
        try {
          if (audioContext.initialized && audioContext.sounds[name]) {
            const source = audioContext.context.createBufferSource();
            source.buffer = audioContext.sounds[name];
            const gainNode = audioContext.context.createGain();
            gainNode.gain.value = audioContext.volumes[name];
            source.connect(gainNode);
            gainNode.connect(audioContext.context.destination);
            source.start(0);
            return source;
          } else if (fallbackAudio[name]) {
            fallbackAudio[name].currentTime = 0;
            fallbackAudio[name].volume = 1.0;
            const promise = fallbackAudio[name].play();
            if (promise !== undefined) {
              promise.catch(e => {});
            }
            return fallbackAudio[name];
          }
        } catch (e) {
          return null;
        }
      }
      function stopSound(source) {
        if (!source) return;
        try {
          if (source.stop) source.stop(0);
          else if (source.pause) {
            source.pause();
            source.currentTime = 0;
          }
        } catch (e) {}
      }
      function unlockAudio() {
        if (initAudio()) {
          const silentBuffer = audioContext.context.createBuffer(1, 1, 22050);
          const source = audioContext.context.createBufferSource();
          source.buffer = silentBuffer;
          source.connect(audioContext.context.destination);
          source.start(0);
        }
        Object.values(fallbackAudio).forEach(audio => {
          if (audio) {
            audio.volume = 0.01;
            audio.play().then(() => {
              audio.pause();
              audio.currentTime = 0;
              audio.volume = 1.0;
            }).catch(e => {});
          }
        });
        document.removeEventListener('click', unlockAudio);
        document.removeEventListener('touchstart', unlockAudio);
        document.removeEventListener('keydown', unlockAudio);
      }
      document.addEventListener('click', unlockAudio);
      document.addEventListener('touchstart', unlockAudio);
      document.addEventListener('keydown', unlockAudio);

      let spinSoundInstance = null;
      const config = {
        spinCost: 10,
        defaultCredits: 500,
        spinDuration: 3000, // Longer spin for more excitement
        stopDelay: 800, // Longer delays between reel stops
        prizes: {
          jackpot: 1000,
          threeOriginal: 1000,
          threeOctobiwan: 500,
          threeMatching: 250,
          twoMatching: 50
        }
      };
      const state = {
        credits: config.defaultCredits,
        spinning: false,
        currentSymbols: [null, null, null],
        bet: config.spinCost,
        lastWin: 0,
        canPull: true
      };
      const octocats = [
        { name: 'Original', image: 'images/original.png', value: 10 },
        { name: 'Surftocat', image: 'images/surftocat.png', value: 5 },
        { name: 'Yogitocat', image: 'https://bensbar.github.io/OctoSlots/images/yogitocat.png', value: 5 },
        { name: 'Boxer', image: 'https://bensbar.github.io/OctoSlots/images/boxertocat_octodex.png', value: 5 },
        { name: 'Dinotocat', image: 'https://bensbar.github.io/OctoSlots/images/dinotocat.png', value: 5 },
        { name: 'Plumber', image: 'https://bensbar.github.io/OctoSlots/images/plumber.png', value: 5 },
        { name: 'Security', image: 'https://bensbar.github.io/OctoSlots/images/securitocat.png', value: 8 },
        { name: 'Inspectocat', image: 'https://bensbar.github.io/OctoSlots/images/inspectocat.png', value: 5 },
        { name: 'Daftpunktocat', image: 'https://bensbar.github.io/OctoSlots/images/daftpunktocat-guy.gif', value: 5 },
        { name: 'Minion', image: 'https://bensbar.github.io/OctoSlots/images/minion.png', value: 5 },
        { name: 'Droidtocat', image: 'https://bensbar.github.io/OctoSlots/images/droidtocat.png', value: 5 },
        { name: 'Ironcat', image: 'https://bensbar.github.io/OctoSlots/images/ironcat.png', value: 5 },
        { name: 'TopGun', image: 'https://bensbar.github.io/OctoSlots/images/topguntocat.png', value: 5 },
        { name: 'Megacat', image: 'https://bensbar.github.io/OctoSlots/images/megacat.png', value: 5 },
        { name: 'Repo', image: 'https://bensbar.github.io/OctoSlots/images/repo.png', value: 5 }
      ];

      // --- STRAIGHT SYMBOLS ---
      function setRandomSymbol(slotItem) {
        const randomOctocat = octocats[Math.floor(Math.random() * octocats.length)];
        slotItem.innerHTML = `<img src="${randomOctocat.image}" alt="${randomOctocat.name}">`;
        slotItem.dataset.name = randomOctocat.name;
        return randomOctocat;
      }
      function setSymbol(slotItem, symbolName) {
        const octocat = octocats.find(o => o.name === symbolName) || octocats[0];
        slotItem.innerHTML = `<img src="${octocat.image}" alt="${octocat.name}">`;
        slotItem.dataset.name = octocat.name;
        return octocat;
      }

      // --- REEL STAGGER (not perfectly aligned) ---
      function randomReelOffset() {
        // offset between -12px and +12px
        return Math.floor(Math.random() * 25) - 12;
      }

      const elements = {
        reels: [
          document.getElementById('reel1'),
          document.getElementById('reel2'),
          document.getElementById('reel3')
        ],
        slotItems: {
          top: [
            document.getElementById('reel1-top'),
            document.getElementById('reel2-top'),
            document.getElementById('reel3-top')
          ],
          middle: [
            document.getElementById('reel1-middle'),
            document.getElementById('reel2-middle'),
            document.getElementById('reel3-middle')
          ],
          bottom: [
            document.getElementById('reel1-bottom'),
            document.getElementById('reel2-bottom'),
            document.getElementById('reel3-bottom')
          ]
        },
        spinButton: document.getElementById('spin-button'),
        creditsDisplay: document.getElementById('credits'),
        betDisplay: document.getElementById('bet-amount'),
        winDisplay: document.getElementById('win-amount'),
        winLine: document.getElementById('win-line'),
        winMessage: document.getElementById('win-message'),
        winValue: document.getElementById('win-value'),
        continueButton: document.getElementById('continue-button'),
        paytableButton: document.querySelector('.paytable-button'),
        paytable: document.querySelector('.paytable'),
        lights: document.querySelectorAll('.light'),
        lever: document.getElementById('lever'),
        slotMachine: document.querySelector('.slot-machine')
      };

      function initializeSlots() {
        for (let i = 0; i < 3; i++) {
          setRandomSymbol(elements.slotItems.top[i]);
          setRandomSymbol(elements.slotItems.middle[i]);
          setRandomSymbol(elements.slotItems.bottom[i]);
        }
      }

      function determineWinningSymbols() {
        const randomValue = Math.random();
        let symbols = [];
        if (randomValue < 0.1) {
          const symbolName = octocats[Math.floor(Math.random() * octocats.length)].name;
          symbols = [symbolName, symbolName, symbolName];
        } else if (randomValue < 0.3) {
          const symbolName1 = octocats[Math.floor(Math.random() * octocats.length)].name;
          let symbolName2;
          do {
            symbolName2 = octocats[Math.floor(Math.random() * octocats.length)].name;
          } while (symbolName2 === symbolName1);
          symbols = [symbolName1, symbolName1, symbolName2];
          symbols.sort(() => Math.random() - 0.5);
        } else {
          symbols = [
            octocats[Math.floor(Math.random() * octocats.length)].name,
            octocats[Math.floor(Math.random() * octocats.length)].name,
            octocats[Math.floor(Math.random() * octocats.length)].name
          ];
        }
        return symbols;
      }

      async function spinAllReels() {
        if (state.spinning) return;
        if (state.credits < state.bet) {
          // Add screen shake for dramatic effect
          elements.slotMachine.style.animation = 'vibrate 0.5s ease-in-out 3';
          setTimeout(() => {
            elements.slotMachine.style.animation = '';
          }, 1500);
          alert('Not enough credits!');
          return;
        }
        if (elements.winMessage.classList.contains('show')) {
          const lightIntervalId = elements.winMessage.dataset.lightIntervalId;
          if (lightIntervalId) {
            clearInterval(parseInt(lightIntervalId));
          }
          elements.winMessage.classList.remove('show');
          stopLights();
        }
        
        // Haptic feedback simulation
        if (navigator.vibrate) {
          navigator.vibrate([100, 50, 100]);
        }
        
        unlockAudio();
        spinSoundInstance = playSound('spin');
        state.credits -= state.bet;
        updateDisplay();
        state.spinning = true;
        state.lastWin = 0;
        elements.spinButton.disabled = true;
        elements.winLine.classList.remove('highlight');
        startLights();

        // Add machine vibration effect
        elements.slotMachine.classList.add('vibrate');

        // Reset all rows to perfectly aligned before spin
        elements.slotItems.middle.forEach(item => item.style.top = '33.33%');
        elements.slotItems.top.forEach(item => item.style.top = '0');
        elements.slotItems.bottom.forEach(item => item.style.top = '66.66%');

        const finalSymbols = determineWinningSymbols();
        elements.reels.forEach(reel => reel.classList.add('spinning'));
        const spinningIntervals = elements.reels.map((reel, reelIndex) => {
          return setInterval(() => {
            setRandomSymbol(elements.slotItems.top[reelIndex]);
            setRandomSymbol(elements.slotItems.middle[reelIndex]);
            setRandomSymbol(elements.slotItems.bottom[reelIndex]);
          }, 80); // Faster symbol changes for more excitement
        });
        
        for (let i = 0; i < 3; i++) {
          await new Promise(resolve => {
            setTimeout(() => {
              clearInterval(spinningIntervals[i]);
              setSymbol(elements.slotItems.top[i], octocats[Math.floor(Math.random() * octocats.length)].name);
              setSymbol(elements.slotItems.middle[i], finalSymbols[i]);
              setSymbol(elements.slotItems.bottom[i], octocats[Math.floor(Math.random() * octocats.length)].name);
              elements.reels[i].classList.remove('spinning');
              playSound('stop');
              
              // Haptic feedback for each reel stop
              if (navigator.vibrate) {
                navigator.vibrate(50);
              }
              
              resolve();
            }, config.spinDuration + i * config.stopDelay);
          });
        }
        
        // Stop machine vibration
        elements.slotMachine.classList.remove('vibrate');
        
        stopSound(spinSoundInstance);
        state.currentSymbols = [
          elements.slotItems.middle[0].dataset.name,
          elements.slotItems.middle[1].dataset.name,
          elements.slotItems.middle[2].dataset.name
        ];
        const win = evaluateWin(state.currentSymbols);
        state.lastWin = win.amount;

        // --- Apply "stagger" effect to middle row after stopping ---
        elements.slotItems.middle.forEach((item, i) => {
          const offset = randomReelOffset();
          item.style.top = `calc(33.33% + ${offset}px)`;
        });
        // Top and bottom stay at fixed positions
        elements.slotItems.top.forEach(item => item.style.top = '0');
        elements.slotItems.bottom.forEach(item => item.style.top = '66.66%');

        if (win.amount > 0) {
          state.credits += win.amount;
          elements.winValue.textContent = win.amount;
          elements.winMessage.classList.add('show');
          elements.winLine.classList.add('highlight');
          playSound(win.sound);
          startLights(true);
          
          // Big win haptic feedback
          if (navigator.vibrate && win.amount >= 250) {
            navigator.vibrate([200, 100, 200, 100, 200]);
          }
        } else {
          playSound('lose');
          stopLights();
        }
        updateDisplay();
        setTimeout(() => {
          state.spinning = false;
          elements.spinButton.disabled = false;
        }, 800);
      }

      function evaluateWin(symbols) {
        if (symbols[0] === 'Original' && symbols[1] === 'Original' && symbols[2] === 'Original') {
          return { amount: config.prizes.jackpot, sound: 'win3' };
        }
        if (symbols[0] === 'Octobiwan' && symbols[1] === 'Octobiwan' && symbols[2] === 'Octobiwan') {
          return { amount: config.prizes.threeOctobiwan, sound: 'win2' };
        }
        if (symbols[0] === symbols[1] && symbols[1] === symbols[2]) {
          return { amount: config.prizes.threeMatching, sound: 'win' };
        }
        if (symbols[0] === symbols[1] || symbols[1] === symbols[2] || symbols[0] === symbols[2]) {
          return { amount: config.prizes.twoMatching, sound: 'win' };
        }
        return { amount: 0, sound: 'lose' };
      }

      function updateDisplay() {
        elements.creditsDisplay.textContent = state.credits;
        elements.betDisplay.textContent = state.bet;
        elements.winDisplay.textContent = state.lastWin;
      }
      let lightInterval = null;
      function startLights(winning) {
        if (lightInterval) clearInterval(lightInterval);
        elements.lights.forEach(light => light.classList.remove('on'));
        let idx = 0;
        lightInterval = setInterval(() => {
          elements.lights.forEach((light, i) => {
            light.classList.toggle('on', winning ? Math.random() > 0.5 : i === idx % elements.lights.length);
          });
          idx++;
        }, 100);
      }
      function stopLights() {
        if (lightInterval) clearInterval(lightInterval);
        elements.lights.forEach(light => light.classList.remove('on'));
      }
      elements.spinButton.addEventListener('click', spinAllReels);
      elements.spinButton.addEventListener('touchstart', function(e) {
        e.preventDefault(); // Prevent double-tap zoom
        if (navigator.vibrate) {
          navigator.vibrate(50);
        }
      });
      elements.continueButton.addEventListener('click', () => {
        elements.winMessage.classList.remove('show');
        elements.winLine.classList.remove('highlight');
        stopLights();
      });
      elements.paytableButton.addEventListener('click', () => {
        elements.paytable.classList.toggle('show');
      });
      document.addEventListener('click', function(e) {
        if (!elements.paytable.contains(e.target) && !elements.paytableButton.contains(e.target)) {
          elements.paytable.classList.remove('show');
        }
      });
      if (elements.lever) {
        // Add touch and mouse events for better responsiveness
        const handleLeverPull = function() {
          if (!state.spinning && state.canPull) {
            state.canPull = false;
            elements.lever.classList.add('pulled');
            
            // Haptic feedback
            if (navigator.vibrate) {
              navigator.vibrate(100);
            }
            
            setTimeout(() => {
              elements.lever.classList.remove('pulled');
              spinAllReels();
              setTimeout(() => { state.canPull = true; }, 1200);
            }, 600);
          }
        };
        
        elements.lever.addEventListener('click', handleLeverPull);
        elements.lever.addEventListener('touchstart', handleLeverPull);
      }
      initializeSlots();
      updateDisplay();
    });
  </script>
</body>
</html>
