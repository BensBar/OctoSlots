<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NFL Slots - NFL Team Logo Slot Machine</title>
    <style>
        :root {
            --primary-bg: #013369;        /* NFL Navy Blue */
            --secondary-bg: #014A8C;      /* Lighter NFL Blue */
            --border-color: #013369;      /* NFL Navy Blue */
            --text-color: #FFFFFF;        /* White */
            --highlight-color: #D50A0A;   /* NFL Red */
            --gold-color: #FFB612;        /* NFL Gold */
            --win-color: #00B140;         /* NFL Green */
            --header-height: 60px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            user-select: none;
        }

        body {
            background: var(--primary-bg);
            color: var(--text-color);
            min-height: 100vh;
            padding-top: var(--header-height);
        }

        .app-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--header-height);
            background: var(--secondary-bg);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            z-index: 1000;
        }

        .game-title {
            font-size: 24px;
            font-weight: bold;
            color: var(--gold-color);
        }

        .user-info, .date-info {
            font-size: 14px;
            opacity: 0.8;
        }

        .slot-machine-container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
        }

        .slot-machine {
            background: var(--secondary-bg);
            border-radius: 20px;
            padding: 20px;
            position: relative;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .reels {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            background: var(--primary-bg);
            padding: 20px;
            border-radius: 10px;
            position: relative;
            z-index: 1;
        }


        .reel {
            width: 32%;
            aspect-ratio: 0.5/1; /* taller for 3 rows */
            background: var(--secondary-bg);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            height: 210px;
            display: flex;
            align-items: center;
        }

        .symbol-track {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 9999px;
            transition: transform 0.5s cubic-bezier(.45,1.8,.5,1);
            display: flex;
            flex-direction: column;
        }
        .symbol-track img {
            width: 100%;
            height: 70px;
            object-fit: contain;
            background: #fff1;
            border-bottom: 1px solid #01336933;
            transition: box-shadow 0.3s;
        }
        .symbol-track.spinning {
            filter: blur(4px) brightness(1.2);
        }
        .symbol-track img.win {
            box-shadow: 0 0 16px 6px var(--win-color), 0 0 4px 2px var(--gold-color);
            z-index: 2;
            border-radius: 8px;
        }
        .payline {
            position: absolute;
            left: 0;
            width: 100%;
            height: 70px;
            top: 70px;
            pointer-events: none;
            z-index: 10;
            display: none;
        }
        .payline.visible {
            display: block;
        }
        .payline-line {
            position: absolute;
            left: 5%;
            width: 90%;
            top: 50%;
            height: 0;
            border-top: 4px solid var(--win-color);
            box-shadow: 0 0 12px 4px var(--gold-color);
            border-radius: 8px;
            transform: translateY(-50%);
        }
        }

        .wild-symbol {
            animation: wild-pulse 2s infinite;
        }

        @keyframes wild-pulse {
            0% { transform: scale(1); filter: brightness(1); }
            50% { transform: scale(1.1); filter: brightness(1.2); }
            100% { transform: scale(1); filter: brightness(1); }
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            position: relative;
            z-index: 2;
        }

        .spin-button {
            background: var(--highlight-color);
            color: var(--text-color);
            border: none;
            padding: 15px 40px;
            font-size: 20px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .spin-button:hover {
            background: var(--win-color);
            transform: translateY(-2px);
        }

        .spin-button:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
        }

        .paytable-button {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--highlight-color);
            color: var(--text-color);
            border: none;
            cursor: pointer;
            font-weight: bold;
            z-index: 3;
        }

        .paytable {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--secondary-bg);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            z-index: 1000;
            min-width: 300px;
        }

        .paytable.visible {
            display: block;
        }

        .paytable h3 {
            color: var(--gold-color);
            margin-bottom: 15px;
            text-align: center;
        }

        .paytable-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            padding: 5px;
            border-radius: 5px;
        }

        .paytable-item img {
            width: 40px;
            height: 40px;
            object-fit: contain;
        }

        .win-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,177,64,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            color: var(--gold-color);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 100;
            pointer-events: none;
        }

        .win-overlay.visible {
            opacity: 1;
        }

        .premium-teams {
            font-size: 12px;
            color: var(--gold-color);
            margin-top: 5px;
        }

        .wild-info {
            background: rgba(255,182,18,0.1);
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
        }

        .credits-display {
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            color: var(--gold-color);
            margin-top: 20px;
        }

        @media (max-width: 600px) {
            .slot-machine-container {
                padding: 10px;
            }

            .reels {
                padding: 10px;
            }

            .spin-button {
                padding: 12px 30px;
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <header class="app-header">
        <div class="user-info">Welcome, BensBar</div>
        <div class="game-title">NFL Slots</div>
        <div class="date-info">2025-06-04 15:35:38</div>
    </header>

    <div class="slot-machine-container">
      <div class="slot-machine">
        <button class="paytable-button" type="button">?</button>
        <div class="paytable">
          <h3>Pay Table</h3>

          <div class="paytable-item">
            <img src="./logos/trophy.png" alt="Trophy">
            <span>3 Trophies = JACKPOT (2000 pts)</span>
          </div>

          <div class="paytable-item">
            <img src="./logos/nfl.png" alt="Premium">
            <span>3 NFL / AFC / NFC = Premium Win (1000 pts)</span>
          </div>

          <div class="paytable-item">
            <span>3 of Any Team (non-premium): 500 pts</span>
          </div>

          <div class="paytable-item">
            <span>2 of Any Team (including wilds): 150 pts</span>
          </div>

          <div class="paytable-item wild-info">
            <img src="./logos/nfl.png" alt="NFL Shield">
            <span>NFL Shield is WILD!</span>
            <div>Matches any other team symbol</div>
          </div>
        </div>

        <div class="reels" style="position:relative;">
          <div class="payline" id="payline"><div class="payline-line"></div></div>
          <div class="reel" id="reel1"><div class="symbol-track"></div></div>
          <div class="reel" id="reel2"><div class="symbol-track"></div></div>
          <div class="reel" id="reel3"><div class="symbol-track"></div></div>
        </div>
        <div class="controls">
          <button class="spin-button">SPIN</button>
        </div>
        <div class="win-overlay"></div>
      </div>
      <div id="credits" class="credits-display">Credits: 1000</div>

  <script>
    let credits = 1000;
    const teams = [
      { name: 'NFL Shield', image: './logos/nfl.png', value: 15, isWild: true, isPremium: true },
      { name: 'Bills', image: './logos/bills.png', value: 8 },
      { name: 'Dolphins', image: './logos/dolphins.png', value: 8 },
      { name: 'Patriots', image: './logos/patriots.png', value: 10 },
      { name: 'Jets', image: './logos/jets.png', value: 5 },
      { name: 'Ravens', image: './logos/ravens.png', value: 8 },
      { name: 'Bengals', image: './logos/bengals.png', value: 8 },
      { name: 'Browns', image: './logos/browns.png', value: 5 },
      { name: 'Steelers', image: './logos/steelers.png', value: 10 },
      { name: 'Texans', image: './logos/texans.png', value: 5 },
      { name: 'Colts', image: './logos/colts.png', value: 8 },
      { name: 'Jaguars', image: './logos/jaguars.png', value: 5 },
      { name: 'Titans', image: './logos/titans.png', value: 5 },
      { name: 'Broncos', image: './logos/broncos.png', value: 8 },
      { name: 'Chiefs', image: './logos/chiefs.png', value: 10, isPremium: true },
      { name: 'Raiders', image: './logos/raiders.png', value: 8 },
      { name: 'Chargers', image: './logos/chargers.png', value: 8 },
      { name: 'Cowboys', image: './logos/cowboys.png', value: 10, isPremium: true },
      { name: 'Giants', image: './logos/giants.png', value: 8 },
      { name: 'Eagles', image: './logos/eagles.png', value: 10, isPremium: true },
      { name: 'Commanders', image: './logos/commanders.png', value: 5 },
      { name: 'Bears', image: './logos/bears.png', value: 8 },
      { name: 'Lions', image: './logos/lions.png', value: 5 },
      { name: 'Packers', image: './logos/packers.png', value: 10, isPremium: true },
      { name: 'Vikings', image: './logos/vikings.png', value: 8 },
      { name: 'Falcons', image: './logos/falcons.png', value: 5 },
      { name: 'Panthers', image: './logos/panthers.png', value: 5 },
      { name: 'Saints', image: './logos/saints.png', value: 8 },
      { name: 'Buccaneers', image: './logos/buccaneers.png', value: 8 },
      { name: '49ers', image: './logos/49ers.png', value: 10, isPremium: true },
      { name: 'Cardinals', image: './logos/cardinals.png', value: 5 },
      { name: 'Rams', image: './logos/rams.png', value: 8 },
      { name: 'Seahawks', image: './logos/seahawks.png', value: 8 },
      { name: 'Trophy', image: './logos/trophy.png', value: 2000, isJackpot: true },
      { name: 'AFC', image: './logos/afc.png', value: 1000, isPremium: true },
      { name: 'NFC', image: './logos/nfc.png', value: 1000, isPremium: true }
    ];

        const reels = [
            document.getElementById('reel1'),
            document.getElementById('reel2'),
            document.getElementById('reel3')
        ];

        const spinButton = document.querySelector('.spin-button');
        const paytableButton = document.querySelector('.paytable-button');
        const paytable = document.querySelector('.paytable');
        const winOverlay = document.querySelector('.win-overlay');


        let spinning = false;
        let currentSymbols = [[], [], []]; // 3x3 grid

        // Helper to get 3 random symbols for a reel
        function getRandomReelSymbols() {
            return [getRandomSymbol(), getRandomSymbol(), getRandomSymbol()];
        }

        // Set the visible symbols for a reel (3 rows)
        function setReelSymbols(reelIndex, symbols) {
            const track = reels[reelIndex].querySelector('.symbol-track');
            currentSymbols[reelIndex] = symbols;
            track.style.transition = 'none';
            track.style.transform = 'translateY(0)';
            track.innerHTML = symbols.map(s => `<img src="${s.image}" alt="${s.name}">`).join('');
        }


        function getRandomSymbol() {
            return teams[Math.floor(Math.random() * teams.length)];
        }


        // Only checks the middle row for win (classic slot style)
        function calculateWin(symbolGrid) {
            // Only check the center row for now
            const symbols = [symbolGrid[0][1], symbolGrid[1][1], symbolGrid[2][1]];
            // ...existing code...
            // (Paste your previous win logic here, unchanged)
            // Check for all symbols are a jackpot symbol
            if (symbols.every(s => s.isJackpot)) {
                return { win: 2000, type: 'jackpot' };
            }
            // Check for all symbols are wild symbol (NFL Shield)
            const wildCount = symbols.filter(s => s.isWild).length;
            if (wildCount === 3) {
                return { win: 2000, type: 'jackpot' };
            }
            // Check for 3 of the same symbol, with wilds substituting
            const nonWildSymbols = symbols.filter(s => !s.isWild);
            if (wildCount > 0 && nonWildSymbols.length > 0) {
                const mostValuableSymbol = nonWildSymbols.reduce((a, b) =>
                    (a.value > b.value) ? a : b, nonWildSymbols[0]);
                const totalMatches = nonWildSymbols.filter(s =>
                    s.name === mostValuableSymbol.name).length + wildCount;
                if (totalMatches === 3) {
                    // Jackpot symbol
                    if (mostValuableSymbol.isJackpot) {
                        return { win: 2000, type: 'jackpot' };
                    }
                    // Premium symbol
                    if (mostValuableSymbol.isPremium) {
                        return { win: 1000, type: 'premium' };
                    }
                    return { win: 500, type: 'three-match' };
                }
                if (totalMatches === 2) {
                    return { win: 150, type: 'two-match' };
                }
            }
            // Count symbol matches (excluding wilds)
            const matches = new Map();
            nonWildSymbols.forEach(s => {
                matches.set(s.name, (matches.get(s.name) || 0) + 1);
            });
            const maxMatches = Math.max(...matches.values(), 0);
            if (maxMatches === 3) {
                const matchedSymbol = nonWildSymbols.find(s =>
                    matches.get(s.name) === 3);
                if (matchedSymbol && matchedSymbol.isJackpot) {
                    return { win: 2000, type: 'jackpot' };
                }
                if (matchedSymbol && matchedSymbol.isPremium) {
                    return { win: 1000, type: 'premium' };
                }
                return { win: 500, type: 'three-match' };
            }
            if (maxMatches === 2) {
                return { win: 150, type: 'two-match' };
            }
            // Check for 3 premium symbols (all different, e.g. AFC/NFC)
            if (symbols.every(s => s.isPremium)) {
                return { win: 1000, type: 'premium' };
            }
            return { win: 0, type: 'no-win' };
        }

        function showWin(amount, type) {
            credits += amount;
            document.getElementById('credits').textContent = `Credits: ${credits}`;
            winOverlay.textContent = `WIN ${amount} POINTS!`;
            winOverlay.classList.add('visible');
            setTimeout(() => {
                winOverlay.classList.remove('visible');
            }, 2000);
        }


        async function spin() {
            if (spinning) return;
            if (credits < 25) {
                alert("Not enough credits!");
                return;
            }

            credits -= 25;
            document.getElementById('credits').textContent = `Credits: ${credits}`;
            spinning = true;
            spinButton.disabled = true;
            winOverlay.classList.remove('visible');

            // Prepare final symbols for each reel (3x3 grid)
            const finalSymbols = [getRandomReelSymbols(), getRandomReelSymbols(), getRandomReelSymbols()];

            // Remove win highlight from all symbols and hide payline
            document.getElementById('payline').classList.remove('visible');
            document.querySelectorAll('.symbol-track img').forEach(img => img.classList.remove('win'));

            // Start all reels spinning at once
            let spinIntervals = [];
            for (let i = 0; i < reels.length; i++) {
                let track = reels[i].querySelector('.symbol-track');
                track.classList.add('spinning');
                spinIntervals[i] = setInterval(() => {
                    // Show 3 random symbols per reel
                    let symbols = getRandomReelSymbols();
                    track.innerHTML = symbols.map(s => `<img src="${s.image}" alt="${s.name}">`).join('');
                }, 80 + i * 30); // slightly staggered speed
            }

            // Stop reels one by one
            for (let i = 0; i < reels.length; i++) {
                await new Promise(resolve => setTimeout(resolve, 700));
                clearInterval(spinIntervals[i]);
                let track = reels[i].querySelector('.symbol-track');
                track.classList.remove('spinning');
                // Animate to final symbols
                track.style.transition = 'none';
                track.style.transform = 'translateY(-70px)';
                setTimeout(() => {
                    setReelSymbols(i, finalSymbols[i]);
                    track.style.transition = 'transform 0.4s cubic-bezier(.45,1.8,.5,1)';
                    track.style.transform = 'translateY(0)';
                }, 50);
            }

            await new Promise(resolve => setTimeout(resolve, 600));
            const result = calculateWin(finalSymbols);
            if (result.win > 0) {
                showWin(result.win, result.type);
                // Highlight the center row (payline)
                document.getElementById('payline').classList.add('visible');
                // Highlight winning symbols in the center row
                for (let i = 0; i < 3; i++) {
                    const track = reels[i].querySelector('.symbol-track');
                    const imgs = track.querySelectorAll('img');
                    if (imgs[1]) imgs[1].classList.add('win');
                }
            }

            spinning = false;
            spinButton.disabled = false;
        }


        // Initialize with random symbols (3 rows per reel)
        reels.forEach((reel, i) => setReelSymbols(i, getRandomReelSymbols()));

        // Event Listeners
        spinButton.addEventListener('click', spin);
        
        paytableButton.addEventListener('click', () => {
            paytable.classList.toggle('visible');
        });

        document.addEventListener('click', (e) => {
            if (!paytable.contains(e.target) && e.target !== paytableButton) {
                paytable.classList.remove('visible');
            }
        });

        // Initialize game
        document.addEventListener('DOMContentLoaded', function() {
            reels.forEach((reel, i) => setReelSymbols(i, getRandomReelSymbols()));
        });
    </script>
</body>
</html>